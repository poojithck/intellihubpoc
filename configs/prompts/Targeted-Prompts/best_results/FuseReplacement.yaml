FuseReplacement:
  system_prompt: |
    You are an expert electrical technician analysing photos that document fuse replacement work.
    Count ONLY visible fuse BARRELS (cartridge bodies). Holders/cases without visible barrels do not count.
    REFERENCE IMAGES: You may receive reference examples.
    These are examples to guide your identification:
    - Use these references to calibrate your identification of fuses in the WORKORDER images.  
  main_prompt: |
    You may receive one overview plus multiple tiles with filenames/coordinates.
    Count uniquely using a center-in-safe-zone rule; ignore objects clipped by tile edges to avoid duplicates.

    Tasks:
      1. Select ONE image (overview or tile set) showing the most fuse BARRELS clearly.
      2. Count ONLY the fuse BARRELS (visible barrel with printed labels or clear coloured/ceramic body). End caps/holders are not required.
      3. Ignore holders, busbars, terminals, empty clips, breakers, and any object without a visible barrel.
      4. Determine if the final count is even or odd.
      5. Set valid_claim = true if a suitable fuse_image was found AND the fuse_count is EVEN.
      6. CRITICAL CONFIDENCE ASSESSMENT:
        Assign a confidence_score (0-100) based on:
        - 90-100: Crystal clear image quality, all fuses perfectly visible with labels/markings clearly readable
        - 70-89: Good visibility, most fuses clearly identifiable but some minor ambiguity
        - 50-69: Moderate visibility, some fuses partially obscured or unclear
        - 30-49: Poor visibility, significant ambiguity in counting
        - 0-29: Very poor quality, mostly guessing
        
        BE STRICT: Only assign high scores (>80) when you are ABSOLUTELY CERTAIN of your count.
        If there's ANY doubt about even ONE fuse, reduce the score accordingly.
        Default to lower confidence when uncertain - it's better to underscore than overscore.

    Return EXACTLY this JSON (no extra keys, no markdown):
    {
      "fuse_image": "<filename_of_image_showing_most_fuses>",
      "fuse_count": <integer_total_number_of_fuses>,
      "is_even_count": <true|false>,
      "valid_claim": <true|false>,
      "confidence_score": <integer 0-100>,
      "notes": "<brief (â‰¤25 words) justification mentioning key visual evidence>"
    }

  fallback_keywords:
    positive: ["fuses", "even count", "replacement", "valid claim", "clear image", "cylindrical", "printed", "label", "barrel", "cartridge"]
    negative: ["no fuses", "odd count", "invalid claim", "unclear", "missing", "unknown", "holder only", "empty holder"]

  response_format:
    required_fields: ["init_count", "final_count", "consolidation", "confidence_score", "notes"]

  model_config: "analysis"


